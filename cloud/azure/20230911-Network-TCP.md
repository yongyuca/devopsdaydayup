# TCP（Transmission Control Protocol)
前几篇，我们介绍了IP，知道了在网络中传输数据需要IP来定位接收方地址。但是在真实的网络中，我们传输一段数据并不是像寄信那样，把所有的信都塞进一个信封里，然后送到邮局去邮寄的，因为我们传输的内容可大可小，并且受限于底层物理介质设计，而且在网络里经常会出现丢包的事。于是网络的设计者就把要传送的数据切分成非常多的小数据包，然后再分别把这些数据包通过互联网传送给接收方，这些包可以是不同的”快递公司“传送，只要所有的包都成功运送，然后再通过特定的顺序还原，就能在接收方获得这封完整的"信件"了。要完成这套流程，我们就需要某些机制完成以下特定功能：
- 确保接收方在线，要不然数据必将石沉大海
- 发送之前把数据包按一定的序列拆分
- 接受之后把数据包按一定的序列重组
- 确保所有数据包没有丢失。如果有，识别出任何丢失的数据包，然后让发送方重发一遍，直到所有的包都收到为止。

很显然，以上这些功能我们的IP是无法做到的，于是另一种叫做TCP的协议机制就被设计出来，完成这些任务了。</br>

在确认接收方在线的时候，TCP使用了很有名的三次握手方式(3-way handshake)。首先发送方向接收方发出一个请求，打了个招呼，问了一个你在微信上最讨厌别人问的问题：”你在吗？"。如果接收方在线，它就会回复说，“我在."。最后接收方就再发出一个确认说:"在就好，我准备发消息了哈"。这样三次交互之后，就建立了一个确定的通信渠道，这时候就可以把数据包按顺序拆分，然后通过网络里各种路径，发送给接收方。接收方收到数据包，确认没有包丢失后，再按照原先的序列重新把这些数据包组合起来，这就完成了一次数据传输了。</br>

最后还要说一下，TCP还有一个类似功能的兄弟，UDP(User Datagram Protocol)。他俩最大的区别，就是UDP没有三次握手这样的确认机制，换句话说，使用UDP传输的数据没有安全保障，很有可能中途丢包。这个机制主要是针对那些注重实效但是不注重是否丢包的应用场景，比如游戏或者网络电话，丢个包少一针无所谓，但是延时太大就无法接受了。

其他所有Azure知识点，请查看：https://github.com/chance2021/devopsdaydayup/blob/main/cloud/azure/README.md