# 组团学Python第20期班会-字典

同学们好！欢迎大家参加我们的第20期每周一三五班会，一起来系统的学习Python。

本期学习内容： 字典（dict）

上期我们介绍了第三类容器类型，集合。知道了集合就是一种可迭代、可变的、无序、不包含重复元素的容器数据类型。我们对它的这四个特性都做了简单介绍。

今天我们将介绍一下第四类容器类型:字典。咋一看它和集合还挺像，都是用大括号括起来，但是仔细一看里面的元素就知道它们是不一样的了，所谓的字典，简单说，就是一系列键值对（key: value）的容器。它主要是用来处理映射类型的数据。所谓的映射，你可以直接理解为关联关系。你可以想想我们现实生活里的电话号码本，一个人对应一个或多个电话号码。键就是人名，值就是对应的电话号码。

字典里每一个键都与一个特定的值相关联，键与值使用冒号:分开，键不能改，值可以改。键不能重复，因此无法哈希的数据类型，比如列表、字典，都不能作为键来用，这样你才可以通过这个独一无二的键来访问相关联的值，而这个值可以是任意数据类型，包括我们之前学习过的数字，字符串，列表，甚至字典！还有空值也是允许的。

因为键不可重复，所以在你设置键的时候，可以利用set()来去重。

这里有个小知识点，整数1和浮点数1.0会被当做相同的键哦，这个要注意一下。

上面说过，字典和集合的表现方式类似，用的也是大括号{}，唯一的区别是，它里面的每一个元素是一对键值对，键值对之间也是用逗号隔开，并且键值对没有个数要求，理论上是无限的。比如:

member = {'name': 'lily', 'birth_date': '19900401', 'age': 34, 'favor_color': ['red', 'blue'], 'other': {'marriage': 'married', 'job': 'accounting'}}

上面这个例子就是一个字典，你可以注意到它里面包含的值有数字，字符串，列表和另一个字典。

你也可以通过类型构造器来创建一个字典，比如:

dict(one=1, two=2)

上面创建的字典就是: {'one': 1, 'two': 2}

你还可以用字典推导式来创建，比如:
{x: x*2 for x in range(100)}

推导式我们介绍完循环之后会再讲，这里先提一下。

字典里的值可以通过键来访问，比如上面那个member，如果我想看看name里的值，我可以这样写:

print(member['name'])

输出就是
'lily'

或者你也可以使用get方法，比如:
print(member.get('name'))

这两个取值的方式在Python底层是一样的操作。

字典是可变（mutable）数据类型，往字典里添加元素也很简单，可以依次指定字典名，用方括号括起来的键，以及相关联的值即可。比如:

member['height'] = 170

这样你就往member这个字典里添加了一个'height': 170 这个元素。 你可以查看验证一下:
print(member['height'])

如果你想添加的元素是第一个元素，你可以先定义一个空字典，然后再添加，比如:

member = {}

字典的修改也很简单，和上面的添加类似，也是依次指定字典名，用方括号括起来的键，以及相关联的值即可。只是这个键必须存在，不存在的话这个动作就是添加了。这点要小心了，别把已经存在的键值给覆盖了。

删除和列表元组一样，也可以使用del语句，指定键直接删，比如

x = {'a':1,'b':2}
print(x)
del x['a']
print(x)

你就可以看到输出里'a':1被删除了。

你还可以使用pop("键")，可以移除该键之后，返回值，也可以使用popitem()，它同样也能移除该键，但注意了，它里面不带键，它只移除字典最后一个键值对，并且会返回整个键值对。

值得注意的是，从Python 3.7开始，字典是有序的。这意味着字典会保留插入时的顺序，这一特性在Python 3.6中被添加，但在之前的版本中不是这样。在较早的Python版本中，字典是无序的，键-值对的顺序不被保证。所以3.7之前popitem这个方法弹出的键值对不保证按顺序弹出，在使用的时候要小心版本了。

关于如何访问字典里内容，因为还没讲到循环，我们先不介绍如何访问每一个元素，我们先来看看如何查看所有的键，值以及键值对。看下面这个例子:

dict1 = {'a':1,'b':2}
print(dict1.items())
print(dict1.keys())
print(dict1.values())

输出是:

dict_items([('a':1),('b':2)])
dict_keys(['a', 'b'])
dict_values([1, 2])

可以看到三个不同的方法产生了三种不同的结果，这个结果我们称为视图view，第一个是键值对视图，第二个是键视图，第三个是值视图。到时候学完循环你就可以分别对以上不同的视图进行遍历了。

在查看字典里的值的时候，有时候我们希望如果该值不存在，不要报错，而是返回一段特定的消息或其他什么，那你可以使用get()来满足这个需求。比如:

alien_0 = {'color': 'green', 'speed': 'slow'}
point_value = alien_0.get('points', 'No point value assigned.')
print(point_value)

在alien_0这个字典里没有'point'这个键，一般如果你直接alien_0['point']，系统是会报错的。但是用了以上方法，返回的值就是你指定的默认值了。

最后简单的介绍几个有用的字典操作方法:

setdefault（key[, default]）: 如果存在去key，就返回它的值，如果不存在，就返回default。

old_dict |= new_dict:它执行的是字典的合并操作，将一个字典的内容与另一个字典的内容合并，并将结果存储回第一个字典中。所以，`old_dict |= new_dict` 的意思是将 `new_dict` 中的键值对合并到 `old_dict` 中，如果 `new_dict` 中有与 `old_dict` 中相同的键，则 `old_dict` 中对应键的值将被更新为 `new_dict` 中的值。这是一种原地更新 `old_dict` 的方式。

dict(zip(list1, list2)): 合并两个列表，成为一个字典。


好了，关于字典，我们就先说这么多吧。

截止到今天，我们班Python里最常见的数据类型都介绍完了。接下来我们将开始介绍程序控制流程。如果说数据类型是单词，那程序控制流程就是语法，它能够将我们学过的这些所有数据类型都组织起来，变成一句一句有意义的话，让我们能够和计算机进行沟通交流，指挥着计算机执行我们想要完成的任务！

下期班会再见！


今日练习:

What will happen after the following code snippet is run?
names = {'Tom': 10, 'Mary': 20}
names[20]
A. Python will show 'Mary'
B. Python will show {'Mary': 20}
C. Python will show KeyError
D. Python will show IndexError



Answer: C
Explanation/Reference:
In dictionaries, square brackets are used to access dictionary items by keys. There is no key 20 in the dictionary (there is only a VALUE 20), so Python will show KeyError